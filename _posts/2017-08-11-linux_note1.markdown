---
layout: post
title:  "shell并行执行hiveSQL脚本"
date:   2017-08-11 00:10:00 +0800
tag: xsw note
category: 2017年8月
description: "shell并行执行hiveSQL脚本"
keywords: hive,shell并行,hive传参,shell传参,linux,hadoop
type: coding
user: kevis
---

#### 假设有多个SQL脚本，test.sql为其中之一：

```
insert overwrite table test1
select
name,
birthday,
'${hiveconf:day}'
from test2 ;
```

'${hiveconf:day}' 指 hive -f file(某个sql文件)命令执行时通过 -hiveconf 定义传递的参数 day。其shell如下：

```
#!/bin/bash

for file in *.sql
do
   hive -hiveconf day=$1 -f $file &
done

```

shell脚本中 for 循环遍历linux当前文件夹下所有的sql文件，执行 hive -f 命令，并将shell的运行时参数 $1 传递给hive命令，继而通过参数 day 赋给 sql中。 

```
& linux 设置此进程为后台进程(实现并行)
```

执行 shell 命令：

```
./test.sh 2017-08-11
```


